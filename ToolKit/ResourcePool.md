# `shared_ptr_imp`

智能指针实现类，管理资源的自动回收。

每次获取一个C资源对象到外部使用时，都先把该资源通过``shared_ptr_imp`进行封装，`shared_ptr_imp`对象析构时，会回收资源。**（通过定义`shared_ptr`删除器实现）**

# `ResourcePool_l`

资源池:管理资源、指定资源分配器、分配资源、回收资源、设置资源池大小。

## `obtain` 资源分配

> 1. 如果资源池不为空，则从池子中头部取出一个资源，如果资源池为空，则新分配一个资源
> 2. 将分配的资源封装成智能指针返回。

## `recycle` 资源回收

> 1. 若获取到对象锁，且当前池中资源数量已达上限，则不回收该资源，直接释放，否则回收。
> 2. 若没有获取到对象锁，则不回收该资源，直接释放。

## `setSize ` 设置资源池的最大个数

> 默认为8个。虽然资源池中的资源个数最多只能有``_poolsize``个，但是用户实际在使用的资源个数是没有限制的。
>
> 从``obtain``函数可以看出，如果用户一直调用该函数分配资源，且不释放，那么肯定会超过``_poolsize``；
>
> 从``recycle``函数可以看出，当资源池容量达到``_poolsize``后，其余待释放的资源是不会被回收的。